plugins {
	id 'org.springframework.boot' version '2.2.4.RELEASE'
	id 'io.spring.dependency-management' version '1.0.9.RELEASE'
	id 'war'
}

group = 'de.larsgrefer'
version = '0.0.1-SNAPSHOT'
sourceCompatibility = '11'

repositories {
	mavenCentral()
}

dependencies {
	implementation 'org.springframework.boot:spring-boot-starter-web'
}

def targetDir = file("build/exploded")

task explodedBootWar(type: Sync) {
	dependsOn bootWar

	from(zipTree(bootWar.archiveFile))
	into(targetDir)
}

task triggerBug(type: Exec) {
	dependsOn explodedBootWar

	workingDir(targetDir)

	commandLine("java", "-classpath", project.fileTree("lib").asPath + ":.", "org.springframework.boot.loader.WarLauncher")
}
